{% extends '::base.html.twig' %}

{% block body -%}
    {{ parent() }}
    <!--
    <ul>
        <li>
            <a href="{{ path('factory_new') }}">
                Root Node
            </a>
        </li>
    </ul>


        {% for entity in entities %}
                {{ entity.name }} {{ entity.children }}: ({{ entity.min }} - {{ entity.max }}) --  <a href="{{ path('factory_edit', { 'id': entity.id }) }}">edit</a>
<br>
                {% for child in children[entity.id] %}
                    | {{ child.value }}
                {% endfor %}
                <br><br>
                -------------------------------------------------
                <br><br>
        {% endfor %}
        -->
        <div>
            <div id="tree" class="aciTree"><div>
                    
                    </div>
                    <script class="code" type="text/javascript">

                $(function() {

                    // init the tree
                    $('#tree').aciTree({
                        ajax: {
                            url: '{{path("factory_json")}}'
                        },
                        selectable: true
                    });

                });

            </script>
<script>
$(document).on("contextmenu", ".rclickable", function(e){
   $(".contextmenu").css( {display:"block", position:"absolute", top:event.pageY, left: event.pageX+20});
   $('#modal').addClass('modal');
   var editurl = "{{path('factory_edit', {"id":"idvariable"}|raw)}}";
   editurl = editurl.replace('idvariable', '\'+$(this).attr("id")+\'');
   $('#modal').load(editurl);
   return false;
});

$(document).click(function(e){
   $(".contextmenu").css('display','none');
});

</script>
    {% endblock %}
